(()=>{"use strict";var t={5055:(t,n,e)=>{e(6992),e(8674),e(9601),e(7727);var o=e(5010),r=e(3396);function a(t,n){var e=(0,r.up)("router-link"),o=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("nav",null,[(0,r.Wm)(e,{to:"/"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Home")]})),_:1}),(0,r.Uk)(" | "),(0,r.Wm)(e,{to:"/about"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Contact us")]})),_:1})]),(0,r.Wm)(o)],64)}var u=e(89);const i={},s=(0,u.Z)(i,[["render",a]]),c=s;var l=e(124),d=e(8534),p=(e(1539),e(8783),e(3948),e(2483)),f=e(7139),h={class:"header"},m={class:"container"},g=["onClick"],v={class:"post"},b={class:"date"},w={class:"container"};function y(t,n,e,o,a,u){return(0,r.wg)(),(0,r.iD)("div",h,[(0,r._)("div",m,[t.authResult?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:n[0]||(n[0]=function(){return u.Logout&&u.Logout.apply(u,arguments)}),class:"center"},"Logout")):(0,r.kq)("",!0)]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.posts,(function(t){return(0,r.wg)(),(0,r.iD)("div",{class:"post-list",key:t.index,onClick:function(n){return u.goToPost(t.id)}},[(0,r._)("div",v,[(0,r._)("p",b,(0,f.zw)(u.formatDate(t.date)),1),(0,r._)("p",null,[(0,r._)("b",null,(0,f.zw)(t.body),1)])])],8,g)})),128)),(0,r._)("div",w,[t.authResult?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:n[1]||(n[1]=function(){return u.AddPost&&u.AddPost.apply(u,arguments)}),class:"center"},"Add Post")):(0,r.kq)("",!0),t.authResult?((0,r.wg)(),(0,r.iD)("button",{key:1,onClick:n[2]||(n[2]=function(){return u.DeleteAll&&u.DeleteAll.apply(u,arguments)}),class:"center"},"Delete All")):(0,r.kq)("",!0)])])}e(7658),e(3710),e(2222),e(3112);const _={user:{authenticated:!1},authenticated:function(){var t=(0,d.Z)((0,l.Z)().mark((function t(){var n=this;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:3000/auth/authenticate",{credentials:"include"}).then((function(t){return t.json()})).then((function(t){n.user.authenticated=t.authenticated,console.log(t)}))["catch"]((function(t){console.log(t),console.log("error logout")}));case 2:return t.abrupt("return",this.user.authenticated);case 3:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},k={name:"HomeView",components:{},data:function(){return{posts:[],authResult:_.authenticated()}},methods:{Logout:function(){var t=this;fetch("http://localhost:3000/auth/logout",{credentials:"include"}).then((function(t){return t.json()})).then((function(n){console.log(n),console.log("jwt removed"),t.$router.push("/login")}))["catch"]((function(t){console.log(t),console.log("error logout")}))},AddPost:function(){this.$router.push("/addpost")},DeleteAll:function(){var t=this;fetch("http://localhost:3000/posts",{method:"DELETE",credentials:"include"}).then((function(t){t.json(),console.log(t)})).then((function(n){console.log(n),console.log("All posts deleted"),t.posts=[]}))["catch"]((function(t){console.log(t),console.log("error deleting all posts")}))},goToPost:function(t){this.$router.push("/post/".concat(t))},formatDate:function(t){var n=new Date(t);return"".concat(String(n.getDate()).padStart(2,"0"),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(n.getFullYear())}},mounted:function(){var t=this;fetch("http://localhost:3000/posts",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+document.cookie.split("=")[1]},credentials:"include"}).then((function(t){return t.json()})).then((function(n){return t.posts=n}))["catch"]((function(t){return console.log(t.message)}))}},P=(0,u.Z)(k,[["render",y],["__scopeId","data-v-1e9cc623"]]),D=P;var S=function(t){return(0,r.dD)("data-v-e7c72494"),t=t(),(0,r.Cn)(),t},C={class:"form"},j=S((function(){return(0,r._)("h3",null,"SignUp",-1)})),O=S((function(){return(0,r._)("label",{for:"email"},"Email",-1)})),A=S((function(){return(0,r._)("label",{for:"password"},"Password",-1)}));function T(t,n,e,a,u,i){return(0,r.wg)(),(0,r.iD)("div",C,[j,O,(0,r.wy)((0,r._)("input",{type:"email",name:"email",required:"","onUpdate:modelValue":n[0]||(n[0]=function(n){return t.email=n})},null,512),[[o.nr,t.email]]),A,(0,r.wy)((0,r._)("input",{type:"password",name:"password",required:"","onUpdate:modelValue":n[1]||(n[1]=function(n){return t.password=n})},null,512),[[o.nr,t.password]]),(0,r._)("button",{onClick:n[2]||(n[2]=function(){return i.SignUp&&i.SignUp.apply(i,arguments)}),class:"SignUp"},"SignUp")])}e(8862);const U={name:"SignUp",data:function(){return{email:"",password:""}},methods:{SignUp:function(){var t=this,n={email:this.email,password:this.password};fetch("http://localhost:3000/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(n){console.log(n),t.$router.push("/")}))["catch"]((function(t){console.log(t),console.log("error")}))}}},E=(0,u.Z)(U,[["render",T],["__scopeId","data-v-e7c72494"]]),Z=E;var I=function(t){return(0,r.dD)("data-v-5ec1ad30"),t=t(),(0,r.Cn)(),t},x={class:"form"},L=I((function(){return(0,r._)("h3",null,"LogIn",-1)})),q=I((function(){return(0,r._)("label",{for:"email"},"Email",-1)})),V=I((function(){return(0,r._)("label",{for:"password"},"Password",-1)})),$={class:"container"};function N(t,n,e,a,u,i){var s=this;return(0,r.wg)(),(0,r.iD)("div",x,[L,q,(0,r.wy)((0,r._)("input",{type:"email",name:"email",required:"","onUpdate:modelValue":n[0]||(n[0]=function(n){return t.email=n})},null,512),[[o.nr,t.email]]),V,(0,r.wy)((0,r._)("input",{type:"password",name:"password",required:"","onUpdate:modelValue":n[1]||(n[1]=function(n){return t.password=n})},null,512),[[o.nr,t.password]]),(0,r._)("div",$,[(0,r._)("button",{onClick:n[2]||(n[2]=function(){return i.LogIn&&i.LogIn.apply(i,arguments)}),class:"center"},"LogIn"),(0,r._)("button",{onClick:n[3]||(n[3]=function(t){return s.$router.push("/signup")}),class:"center"},"Signup")])])}const B={name:"LogIn",data:function(){return{email:"",password:""}},methods:{LogIn:function(){var t={email:this.email,password:this.password};fetch("http://localhost:3000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(t){return t.json()})).then((function(t){console.log(t),location.assign("/")}))["catch"]((function(t){console.log(t),console.log("error")}))}}},M=(0,u.Z)(B,[["render",N],["__scopeId","data-v-5ec1ad30"]]),z=M;var H=function(t){return(0,r.dD)("data-v-1777a2f4"),t=t(),(0,r.Cn)(),t},R={class:"form"},F=H((function(){return(0,r._)("h3",null,"Add Post",-1)})),J=H((function(){return(0,r._)("label",{for:"body"},"Post Body",-1)}));function W(t,n,e,a,u,i){return(0,r.wg)(),(0,r.iD)("div",R,[F,J,(0,r.wy)((0,r._)("textarea",{name:"body",required:"","onUpdate:modelValue":n[0]||(n[0]=function(n){return t.body=n})},null,512),[[o.nr,t.body]]),(0,r._)("button",{onClick:n[1]||(n[1]=function(){return i.addPost&&i.addPost.apply(i,arguments)}),class:"AddPost"},"Add Post")])}e(8733);const Y={name:"AddPost",data:function(){return{body:""}},methods:{addPost:function(){var t=this,n={body:this.body,date:(new Date).toISOString()};fetch("http://localhost:3000/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+document.cookie.split("=")[1]},credentials:"include",body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(n){console.log(n),t.$router.push("/")}))["catch"]((function(t){console.log(t),console.log("error")}))}}},G=(0,u.Z)(Y,[["render",W],["__scopeId","data-v-1777a2f4"]]),K=G;var Q=function(t){return(0,r.dD)("data-v-4c1f96be"),t=t(),(0,r.Cn)(),t},X={class:"form"},tt=Q((function(){return(0,r._)("h3",null,"A Post",-1)})),nt=Q((function(){return(0,r._)("label",{for:"body"},"Post Body",-1)})),et={class:"container"};function ot(t,n,e,a,u,i){return(0,r.wg)(),(0,r.iD)("div",X,[tt,nt,(0,r.wy)((0,r._)("textarea",{name:"body",required:"","onUpdate:modelValue":n[0]||(n[0]=function(n){return t.body=n})},null,512),[[o.nr,t.body]]),(0,r._)("div",et,[(0,r._)("button",{onClick:n[1]||(n[1]=function(t){return i.updatePost()}),class:"center"},"Update"),(0,r._)("button",{onClick:n[2]||(n[2]=function(t){return i.deletePost()}),class:"center"},"Delete")])])}const rt={name:"Post",data:function(){return{body:""}},methods:{deletePost:function(){fetch("http://your-api-url/posts/${postId}",{method:"DELETE",credentials:"include"})},updatePost:function(){this.body,(new Date).toISOString();fetch("http://localhost:3000/posts",{method:"PUT",credentials:"include"})}}},at=(0,u.Z)(rt,[["render",ot],["__scopeId","data-v-4c1f96be"]]),ut=at;var it=[{path:"/",name:"home",component:D,beforeEnter:function(){var t=(0,d.Z)((0,l.Z)().mark((function t(n,e,o){var r;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.authenticated();case 2:r=t.sent,r?o():o("/login");case 4:case"end":return t.stop()}}),t)})));function n(n,e,o){return t.apply(this,arguments)}return n}()},{path:"/signup",name:"SignUp",component:Z},{path:"/login",name:"LogIn",component:z},{path:"/about",name:"about",component:function(){return e.e(443).then(e.bind(e,2141))}},{path:"/addpost",name:"AddPost",component:K,beforeEnter:function(){var t=(0,d.Z)((0,l.Z)().mark((function t(n,e,o){var r;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.authenticated();case 2:r=t.sent,r?o():o("/login");case 4:case"end":return t.stop()}}),t)})));function n(n,e,o){return t.apply(this,arguments)}return n}()},{path:"/posts/:postId",name:"Post",component:ut,beforeEnter:function(){var t=(0,d.Z)((0,l.Z)().mark((function t(n,e,o){var r;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.authenticated();case 2:r=t.sent,r?o():o("/login");case 4:case"end":return t.stop()}}),t)})));function n(n,e,o){return t.apply(this,arguments)}return n}()}],st=(0,p.p7)({history:(0,p.r5)(),routes:it});const ct=st;var lt=e(65);const dt=(0,lt.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,o.ri)(c).use(dt).use(ct).mount("#app")}},n={};function e(o){var r=n[o];if(void 0!==r)return r.exports;var a=n[o]={exports:{}};return t[o](a,a.exports,e),a.exports}e.m=t,(()=>{var t=[];e.O=(n,o,r,a)=>{if(!o){var u=1/0;for(l=0;l<t.length;l++){for(var[o,r,a]=t[l],i=!0,s=0;s<o.length;s++)(!1&a||u>=a)&&Object.keys(e.O).every((t=>e.O[t](o[s])))?o.splice(s--,1):(i=!1,a<u&&(u=a));if(i){t.splice(l--,1);var c=r();void 0!==c&&(n=c)}}return n}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[o,r,a]}})(),(()=>{e.n=t=>{var n=t&&t.__esModule?()=>t["default"]:()=>t;return e.d(n,{a:n}),n}})(),(()=>{e.d=(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})}})(),(()=>{e.f={},e.e=t=>Promise.all(Object.keys(e.f).reduce(((n,o)=>(e.f[o](t,n),n)),[]))})(),(()=>{e.u=t=>"js/about.5c2b20b9.js"})(),(()=>{e.miniCssF=t=>{}})(),(()=>{e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n)})(),(()=>{var t={},n="wad2022-lab13-fr:";e.l=(o,r,a,u)=>{if(t[o])t[o].push(r);else{var i,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==n+a){i=d;break}}i||(s=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,e.nc&&i.setAttribute("nonce",e.nc),i.setAttribute("data-webpack",n+a),i.src=o),t[o]=[r];var p=(n,e)=>{i.onerror=i.onload=null,clearTimeout(f);var r=t[o];if(delete t[o],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((t=>t(e))),n)return n(e)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),s&&document.head.appendChild(i)}}})(),(()=>{e.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{e.p="/"})(),(()=>{var t={143:0};e.f.j=(n,o)=>{var r=e.o(t,n)?t[n]:void 0;if(0!==r)if(r)o.push(r[2]);else{var a=new Promise(((e,o)=>r=t[n]=[e,o]));o.push(r[2]=a);var u=e.p+e.u(n),i=new Error,s=o=>{if(e.o(t,n)&&(r=t[n],0!==r&&(t[n]=void 0),r)){var a=o&&("load"===o.type?"missing":o.type),u=o&&o.target&&o.target.src;i.message="Loading chunk "+n+" failed.\n("+a+": "+u+")",i.name="ChunkLoadError",i.type=a,i.request=u,r[1](i)}};e.l(u,s,"chunk-"+n,n)}},e.O.j=n=>0===t[n];var n=(n,o)=>{var r,a,[u,i,s]=o,c=0;if(u.some((n=>0!==t[n]))){for(r in i)e.o(i,r)&&(e.m[r]=i[r]);if(s)var l=s(e)}for(n&&n(o);c<u.length;c++)a=u[c],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return e.O(l)},o=self["webpackChunkwad2022_lab13_fr"]=self["webpackChunkwad2022_lab13_fr"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))})();var o=e.O(void 0,[998],(()=>e(5055)));o=e.O(o)})();
//# sourceMappingURL=app.d201a7e9.js.map